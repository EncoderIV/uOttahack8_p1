log:
  stdout_log_level: INFO

!include ../shared_config.yaml

# =============================================================================
# Weather Agent - Fetches weather snapshot from Backend (no geolocation here)
# =============================================================================

apps:
  - name: weather-agent_app
    app_base_path: .
    app_module: solace_agent_mesh.agent.sac.app

    broker:
      <<: *broker_connection

    app_config:
      namespace: ${NAMESPACE, sam/}
      supports_streaming: true
      agent_name: "WeatherAgent"
      display_name: "Weather Snapshot (Backend)"
      model: *general_model

      instruction: |
        You are a data-only agent.
        You do NOT reason or give plant advice.

        Always fetch the latest weather snapshot from the backend:
          GET ${BACKEND_BASE_URL}/weather

        Return JSON only (the backend response).
        If backend returns an error (e.g., no_location), return that error JSON only.

      tools:
        - tool_type: builtin
          tool_name: web_request

      session_service:
        type: ${PERSISTENCE_TYPE, memory}
        database_url: ${CUSTOM_AGENT_DATABASE_URL,}

      artifact_service: *default_artifact_service

      agent_card:
        description: >
          Fetches a compact weather snapshot from the local backend (which already has user
          location). Returns JSON only. No recommendations or reasoning.
        defaultInputModes: ["text"]
        defaultOutputModes: ["text", "file"]
        skills:
          - id: "fetch_weather"
            name: "Fetch Weather"
            description: "Calls backend /weather and returns snapshot JSON"

      agent_card_publishing:
        interval_seconds: 10

      agent_discovery:
        enabled: true

      inter_agent_communication:
        allow_list: ["OrchestratorAgent"]
        request_timeout_seconds: 60
