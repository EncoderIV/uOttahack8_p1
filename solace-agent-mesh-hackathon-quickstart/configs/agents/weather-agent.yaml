log:
  stdout_log_level: INFO

!include ../shared_config.yaml

apps:
  - name: weather-agent_app
    app_base_path: .
    app_module: solace_agent_mesh.agent.sac.app

    broker:
      <<: *broker_connection

    app_config:
      namespace: ${NAMESPACE, sam/}
      supports_streaming: true
      agent_name: "WeatherAgent"
      display_name: "Weather Snapshot (Data)"
      model: *general_model

      instruction: |
        You produce a compact weather snapshot for plant care reasoning.
        If the user provides raw weather numbers, reformat them into the JSON schema below.
        If the user provides only a location and time, ask for the minimum missing fields
        OR return a placeholder structure with nulls and a "needs" list.

        OUTPUT JSON ONLY:
        {
          "location": "...",
          "ts": "...",
          "outside": { "temp_c": null, "humidity_percent": null, "wind_kph": null, "precip_mm_6h": null },
          "daylight": { "sunrise": null, "sunset": null },
          "needs": ["temp_c", "humidity_percent", "sunrise", "sunset"]  // only if missing
        }

        Do not give advice; only return data.

      tools:
        - tool_type: builtin-group
          group_name: artifact_management

      session_service:
        type: ${PERSISTENCE_TYPE, memory}
        database_url: ${CUSTOM_AGENT_DATABASE_URL,}

      artifact_service: *default_artifact_service

      agent_card:
        description: >
          Weather data agent - returns a compact weather snapshot JSON for the advisor agent.
          Does not provide plant recommendations.
        defaultInputModes: ["text"]
        defaultOutputModes: ["text", "file"]

      agent_card_publishing:
        interval_seconds: 10

      agent_discovery:
        enabled: true

      inter_agent_communication:
        allow_list: ["OrchestratorAgent"]
        request_timeout_seconds: 120
